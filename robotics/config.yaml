# Configuration file for RoVi Project 2025
# Author: Mehmet Baha Dursun

# Debug settings for logging
# Reference: utils/logger.py ProjectLogger class
debug:
  enabled: true       # Show DEBUG level logs (detailed info)
  log_to_file: true   # Write logs to outputs/planning_logs/

  # Log level options:
  # - "ALL": Show all log levels (DEBUG, INFO, WARNING, ERROR)
  # - Single level: "INFO" (shows INFO and above)
  # - Multiple levels: ["INFO", "WARNING", "ERROR"] (shows only these specific levels)
  log_level: "ALL"

# Default project (can be overridden at runtime)
# select "robotic_project" or "integration_project"
default_project: "integration_project"

# =============================================================================
# PROJECT 1: ROBOTIC PROJECT (Box/Cylinder/T-block)
# =============================================================================
robotic_project:
  model_path: "scene_obstacles_lecture_6.xml"
  objects_to_move:
    - box
    - cylinder
    - t_block
  available_planners: ["rrt", "prm", "p2p"]

  # Note: I did not tested the PRM planner honestly i just copy pasted and i dont have a time 
  # NOrmally i was going to implement rrt* quintic but i didnt have time

  # Planner settings
  planner:
    default_type: "rrt"  # "rrt" or "prm" or "p2p"

  # P2P data collection settings
  # When enabled, RRT paths are simplified and logged for P2P waypoint extraction
    p2p:
      data_collection_rrt_simplified: false  

  # Timing settings (in milliseconds)
  timing:
    gripper:
      # Gripper control values (0-255 range from Hand-E actuator)
      open_value: 0           # Gripper fully open position
      close_value: 255        # Gripper fully closed position
      closed_threshold: 200   # Above this = considered closed (for duck freeze logic)
      # Timing
      open_time: 800
      close_time: 800
      release_time: 800
    rrt:
      descent_time: 500
      lift_time: 500
      path_time: 300
      place_path_time: 600
    p2p:
      segment_time: 1500

  # IK settings
  # Reference: scripts/ik_simple.py and ik_goal_region.py
  ik:
    mode: "simple" # "simple" (direct IK) or "goal_region" (OMPL GoalSampleableRegion)

  # IK Sampling settings
    sampling:
      n_samples: 64 # normally 8-16 is enough, increased for testing

    # Approach direction sweep - rotates target frame around Z axis
    # Specifically made for cylinder object!
    # Other boxes might not hold properly if rotated
      sweep:
        enabled: false
        degrees: 30
    goal_region:
      distance_tolerance: 0.02  # meters
      angle_tolerance: 0.1      # radians

  # P2P Frame Definitions
  # Reference: scripts/ik_p2p.py P2PFramePlanner
  p2p_frames:
    box:
      frames:
        - type: "joint"
          q: [0.2635, -1.1258, 1.4288, -1.8749, -1.5705, -1.3077]
        - type: "joint"
          q: [0.2635, -0.9654, 1.6012, -2.2077, -1.5705, -1.3077]
        - type: "joint"
          q: [0.2635, -1.1267, 1.4316, -1.8762, -1.5705, -1.3077]
        - type: "joint"
          q: [0.3426, -2.5339, 1.5745, -2.2725, -1.2949, 0.2290]
        - type: "joint"
          q: [1.1275, -2.2584, 1.1130, -2.4150, -0.5955, 0.1277]
        - type: "joint"
          q: [2.0686, -1.5929, 0.9646, -2.2279, -0.6341, 0.2896]
        - type: "joint"
          q: [2.4779, -1.1251, 1.4264, -1.8721, -1.5708, 0.9071]
        - type: "joint"
          q: [2.4779, -0.9656, 1.6000, -2.2052, -1.5708, 0.9071]
      gripper_close_after: 1   # For grasping
      gripper_open_after: 7    # For dropping

    cylinder:
      frames:
        - type: "joint"
          q: [-0.6537, -1.3818, 2.7096, -1.3277, 0.9171, 3.1414]
        - type: "joint"
          q: [-0.3657, -1.1561, 2.2672, -1.1112, 1.2051, 3.1416]
        - type: "joint"
          q: [-0.3681, -1.4934, 2.1418, -0.6471, 1.2027, 3.1414]
        - type: "joint"
          q: [0.0202, -1.3051, 0.6979, 1.6098, -1.2394, 2.2391]
        - type: "joint"
          q: [0.2533, -1.4133, 0.6094, 1.7032, -1.4624, 2.2357]
        - type: "joint"
          q: [0.6423, -1.5543, 0.5895, 1.6948, -1.5672, 2.2638]
        - type: "joint"
          q: [1.1882, -1.6886, 0.7657, 1.4209, -1.2869, 2.3574]
        - type: "joint"
          q: [1.9235, -1.7605, 1.1951, 0.7799, -0.5285, 2.5786]
        - type: "joint"
          q: [2.0526, -1.7382, 1.3156, 0.5987, -0.3099, 2.6482]
        - type: "joint"
          q: [2.7733, -1.4944, 2.1424, -0.6481, 1.2024, 3.1416]
        - type: "joint"
          q: [2.7724, -1.1560, 2.2673, -1.1114, 1.2016, -3.1416]
      gripper_close_after: 1
      gripper_open_after: 10

    t_block:
      frames:
        - type: "joint"
          q: [-0.6642, -1.1151, 1.4560, -1.9117, -1.5710, -0.6666]
        - type: "joint"
          q: [-0.6640, -0.9418, 1.6112, -2.2399, -1.5710, -0.6664]
        - type: "joint"
          q: [-0.5694, -1.9537, 1.1384, -2.7068, -1.3022, -0.6636]
        - type: "joint"
          q: [-1.5012, -1.9231, 0.5243, -2.7075, -1.3062, -0.6636]
        - type: "joint"
          q: [-3.2167, -1.9458, 0.3143, -2.8164, -1.5274, 0.1755]
        - type: "joint"
          q: [-2.8781, -1.1180, 1.4428, -1.8956, -1.5708, -2.8781]
        - type: "joint"
          q: [-2.8780, -0.9514, 1.6065, -2.2259, -1.5708, -2.8780]
      gripper_close_after: 1   # For grasping
      gripper_open_after: 6    # For dropping

# =============================================================================
# PROJECT 2: INTEGRATION PROJECT (Duck + Camera Pose Estimation)
# =============================================================================
integration_project:
  model_path: "scene_project_cv.xml"
  objects_to_move:
    - duck
  available_planners: ["p2p"]
  num_runs: 5

  # Timing settings (in milliseconds) - SEPARATE from robotic_project
  timing:
    gripper:
      # Gripper control values (0-255 range from Hand-E actuator)
      open_value: 0           # Gripper fully open position
      close_value: 255        # Gripper fully closed position
      closed_threshold: 200   # Above this = considered closed (for duck freeze logic)
      # Timing
      open_time: 800
      close_time: 1000      # Longer for duck scenerio
      release_time: 800
    rrt:
      descent_time: 600     # Slower descent for duck scenerio
      lift_time: 600
      path_time: 400
      place_path_time: 700
    p2p:
      segment_time: 1500    # slower for carrying duck
 
  # IK settings
  ik:
    mode: "simple"
    sampling:
      n_samples: 64

  # P2P Frame Definitions for Duck
  # NOTE: First 2 frames (approach + grasp) are DYNAMIC from pose estimation
  p2p_frames:
    duck:
      frames:
        # Transport (static waypoints)
        - type: "joint"
          q: [0.2635, -1.1267, 1.4316, -1.8762, -1.5705, -1.3077]  # Lift
        - type: "joint"
          q: [0.3426, -2.5339, 1.5745, -2.2725, -1.2949, 0.2290]
        - type: "joint"
          q: [1.1275, -2.2584, 1.1130, -2.4150, -0.5955, 0.1277]
        - type: "joint"
          q: [2.0686, -1.5929, 0.9646, -2.2279, -0.6341, 0.2896]
        - type: "joint"
          q: [2.4779, -1.1251, 1.4264, -1.8721, -1.5708, 0.9071]  # Drop approach
        # Drop position
        - type: "joint"
          q: [2.4779, -0.8500, 1.6500, -2.3200, -1.5708, 0.9071]
      # Frame indices in the code first 2 points are now dynamic
      # so means:
      # 0: approach
      # 1: grasp
      # 2-7: transport + drop (STATIC)
      gripper_close_after: 1
      gripper_open_after: 7

output:
  directory: "outputs"
