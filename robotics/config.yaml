# Configuration file for RoVi Project 2025
# Author: Mehmet Baha Dursun

# Debug settings for logging
# Reference: utils/logger.py ProjectLogger class
debug:
  enabled: true       # Show DEBUG level logs (detailed info)
  log_to_file: true   # Write logs to outputs/planning_logs/

  # Log level options:
  # - "ALL": Show all log levels (DEBUG, INFO, WARNING, ERROR)
  # - Single level: "INFO" (shows INFO and above)
  # - Multiple levels: ["INFO", "WARNING", "ERROR"] (shows only these specific levels)
  log_level: "ALL"

# Scene settings
# u need to put .xml under of robotics directory or else its will be not work
scene:
  model_path: "scene_obstacles_lecture_6.xml"
  objects_to_move:
    - box
    - cylinder
    - t_block

# Planner settings
planner:
  default_type: "rrt"  # "rrt" or "prm" or "p2p"

  # P2P data collection settings
  # When enabled, RRT paths are simplified and logged for P2P waypoint extraction
  p2p:
    data_collection_rrt_simplified: false  # Enable to collect simplified RRT paths for P2P

# Timing settings (in milliseconds)
# Reference: scripts/manipulation.py
timing:
  # Gripper timing (used by both RRT and P2P)
  gripper:
    close_time: 300      # Time for gripper to close (grasp)
    release_time: 800    # Time for gripper to open (release) - longer for physics settling

  # RRT/PRM specific timing
  rrt:
    descent_time: 500    # Time for descent to grasp position
    lift_time: 500       # Time for lift after grasp
    path_time: 300       # Time for approach path execution
    place_path_time: 600 # Time for place/transport path execution

  # P2P specific timing
  p2p:
    segment_time: 500    # Time per waypoint segment (default)

# IK settings
# Reference: scripts/ik_simple.py and ik_goal_region.py
ik:
  mode: "simple"  # "simple" (direct IK) or "goal_region" (OMPL GoalSampleableRegion)

  # IK Sampling settings
  sampling:
    n_samples: 64  # normally 8-16 is enough, increased for testing

    # Approach direction sweep - rotates target frame around Z axis
    # Specifically made for cylinder object!
    # Other boxes might not hold properly if rotated
    sweep:
      enabled: false
      degrees: 30    # -30 to +30 total 60

  # GoalSampleableRegion settings (only used when mode: "goal_region")
  goal_region:
    distance_tolerance: 0.02  # meters
    angle_tolerance: 0.1      # radians

# P2P Frame Definitions
# Reference: scripts/ik_p2p.py P2PFramePlanner
p2p_frames:
  box:
    frames:
      # Approaching and Gripping
      - type: "joint"
        q: [0.2635, -1.1258, 1.4288, -1.8749, -1.5705, -1.3077]
      - type: "joint"
        q: [0.2635, -0.9654, 1.6012, -2.2077, -1.5705, -1.3077]
      # Transport
      - type: "joint"
        q: [0.2635, -1.1267, 1.4316, -1.8762, -1.5705, -1.3077]
      - type: "joint"
        q: [0.3426, -2.5339, 1.5745, -2.2725, -1.2949, 0.2290]
      - type: "joint"
        q: [1.1275, -2.2584, 1.1130, -2.4150, -0.5955, 0.1277]
      - type: "joint"
        q: [2.0686, -1.5929, 0.9646, -2.2279, -0.6341, 0.2896]
      - type: "joint"
        q: [2.4779, -1.1251, 1.4264, -1.8721, -1.5708, 0.9071]
      # Dropping at table
      - type: "joint"
        q: [2.4779, -0.9656, 1.6000, -2.2052, -1.5708, 0.9071]

    gripper_close_after: 1   # For grasping
    gripper_open_after: 7    # For dropping

  cylinder:
    frames:
      # Approach (from RRT)
      - type: "joint"
        q: [-0.6537, -1.3818, 2.7096, -1.3277, 0.9171, 3.1414]
      # Grasp position
      - type: "joint"
        q: [-0.3657, -1.1561, 2.2672, -1.1112, 1.2051, 3.1416]
      # Transport - lifted position
      - type: "joint"
        q: [-0.3681, -1.4934, 2.1418, -0.6471, 1.2027, 3.1414]
      # Transport waypoints (from RRT)
      - type: "joint"
        q: [0.0202, -1.3051, 0.6979, 1.6098, -1.2394, 2.2391]
      - type: "joint"
        q: [0.2533, -1.4133, 0.6094, 1.7032, -1.4624, 2.2357]
      - type: "joint"
        q: [0.6423, -1.5543, 0.5895, 1.6948, -1.5672, 2.2638]
      - type: "joint"
        q: [1.1882, -1.6886, 0.7657, 1.4209, -1.2869, 2.3574]
      - type: "joint"
        q: [1.9235, -1.7605, 1.1951, 0.7799, -0.5285, 2.5786]
      - type: "joint"
        q: [2.0526, -1.7382, 1.3156, 0.5987, -0.3099, 2.6482]
      # Drop approach
      - type: "joint"
        q: [2.7733, -1.4944, 2.1424, -0.6481, 1.2024, 3.1416]
      # Drop place position
      - type: "joint"
        q: [2.7724, -1.1560, 2.2673, -1.1114, 1.2016, -3.1416]

    gripper_close_after: 1   # After grasp (index 1)
    gripper_open_after: 10   # After drop place (index 10)

  t_block:
    frames:
      # Approach
      - type: "joint"
        q: [-0.6642, -1.1151, 1.4560, -1.9117, -1.5710, -0.6666]
      # Grasp
      - type: "joint"
        q: [-0.6640, -0.9418, 1.6112, -2.2399, -1.5710, -0.6664]
      # Transport
      - type: "joint"
        q: [-0.5694, -1.9537, 1.1384, -2.7068, -1.3022, -0.6636]
      - type: "joint"
        q: [-1.5012, -1.9231, 0.5243, -2.7075, -1.3062, -0.6636]
      - type: "joint"
        q: [-3.2167, -1.9458, 0.3143, -2.8164, -1.5274, 0.1755]
      # Drop approach
      - type: "joint"
        q: [-2.8781, -1.1180, 1.4428, -1.8956, -1.5708, -2.8781]
      # Drop place
      - type: "joint"
        q: [-2.8780, -0.9514, 1.6065, -2.2259, -1.5708, -2.8780]

    gripper_close_after: 1   # For grasping
    gripper_open_after: 6    # For dropping


# Output paths
output:
  directory: "outputs"
